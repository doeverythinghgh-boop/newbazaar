
<style>
  /* Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªØ£Ø«ÙŠØ±Ø§Øª hover ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. */

  /* === ØªØµÙ…ÙŠÙ… Ø¬Ø¯ÙŠØ¯ ÙˆÙ…Ø­Ø³Ù‘Ù† Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ === */

  /* 1. Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© ÙˆØªØ®Ø·ÙŠØ·Ù‡Ø§ Ø§Ù„Ø¹Ø§Ù… */
  @keyframes login_gradient-animation {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .login_page-wrapper {
    font-family: "Tajawal", sans-serif;
    /* Ø¬Ø¯ÙŠØ¯: Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© Ø¬Ø°Ø§Ø¨Ø© */
    background-size: 400% 400%;
    animation: login_gradient-animation 15s ease infinite;
    min-height: 100vh;
    display: flex; /* âœ… ØªØ¹Ø¯ÙŠÙ„: ØªØºÙŠÙŠØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ© */
    align-items: flex-start; /* Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ */
    justify-content: center;
    padding: 20px; /* âœ… ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø¶Ø§ÙØ© Ø­Ø´Ùˆ Ø¹Ù„ÙˆÙŠ Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù„Ù„Ø£Ø³ÙÙ„ Ù‚Ù„ÙŠÙ„Ù‹Ø§ */
    box-sizing: border-box;
  }

  /* 2. Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©) */
  .login_container {
    background-color: var(--bg-color-white);
    width: 100%;
    /* ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø§Ù„Ø«Ø§Ø¨Øª Ù„ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 0; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø´Ùˆ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
    background: none; /* Ø¬Ø¹Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø´ÙØ§ÙØ© */
  }

  /* 3. Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„) */
  .login_container h2 {
    margin-top: 0;
    margin-bottom: 0px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ø³ÙÙ„ÙŠØ© */
    color: var(--dark-blue); /* Ù„ÙˆÙ† Ø£ØºÙ…Ù‚ ÙˆØ£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ù‹Ø§ */
    font-size: clamp(28px, 6vw, 36px); /* ØªÙƒØ¨ÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
    font-weight: 700;
    text-align: center;
  }

  /* 4. Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù†ÙØ³Ù‡ */
  .login_container form {
    width: 100%;
    max-width: 420px; /* ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‚ØµÙ‰ */
    /* Ø¬Ø¯ÙŠØ¯: ØªØ£Ø«ÙŠØ± Ø²Ø¬Ø§Ø¬ÙŠ Ø´ÙØ§Ù */
    background-color: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: 40px;
    border-radius: 20px; /* Ø­ÙˆØ§Ù Ø£ÙƒØ«Ø± Ø¯Ø§Ø¦Ø±ÙŠØ© */
    /* Ø¬Ø¯ÙŠØ¯: Ø¸Ù„ Ø£ÙƒØ«Ø± Ù†Ø¹ÙˆÙ…Ø© ÙˆØ¹Ù…Ù‚Ù‹Ø§ */
    box-shadow: var(--shadow-soft);
    border: 1px solid var(--border-color-soft);
  }

  /* 5. Ù…Ø¬Ù…ÙˆØ¹Ø© Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ (Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø­Ù‚Ù„) */
  .login_form-group {
    margin-bottom: 20px;
    text-align: right; /* Align labels to the right */
    position: relative; /* Ù…Ù‡Ù… Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¨Ø§Ù„Ø¯Ø§Ø®Ù„ */
  }

  .login_form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--dark-blue); /* Ù„ÙˆÙ† Ø±Ù…Ø§Ø¯ÙŠ Ø¯Ø§ÙƒÙ† */
    font-size: 0.9rem;
  }

  /* 6. Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
  .login_form-group input {
    width: 100%; /* ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø­Ø§ÙˆÙŠØ© */
    padding: 14px 45px 14px 15px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† */
    border: 1px solid var(--border-color-input); /* Ù„ÙˆÙ† Ø¥Ø·Ø§Ø± Ø£ÙØªØ­ */
    border-radius: 10px; /* Ø²ÙŠØ§Ø¯Ø© Ø¯Ø§Ø¦Ø±ÙŠØ© Ø§Ù„Ø­ÙˆØ§Ù */
    box-sizing: border-box;
    font-family: "Tajawal", sans-serif;
    font-size: 16px;
    transition: border-color 0.3s, box-shadow 0.3s;
    background-color: var(--bg-color-white); /* ØªØ¹Ø¯ÙŠÙ„: Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ Ù†Ù‚ÙŠØ© */
  }

  /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯Ø§Ø®Ù„ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù„Ù€ password */
  .login_password-wrapper {
    position: relative;
  }

  /* Adjust password input padding to make space for the icon */
  .login_password-wrapper input[type="password"],
  .login_password-wrapper input[type="text"] {
    /* ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ù‡Ù†Ø§ Ù„Ø£Ù†Ù‡Ø§ Ù…ØªØ¹Ø§Ø±Ø¶Ø© Ù…Ø¹ #login_password ÙˆØ³Ø£Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ id ÙÙ‚Ø· */
    /* padding-left: 40px; */
  }

  /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ (ÙÙŠ Ø­Ø§Ù„Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ) */
  .login_form-group .fa-phone,
  .login_form-group .fa-user {
    /* ØªØ¹Ø¯ÙŠÙ„: ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
    position: absolute;
    top: 50%;
    right: 15px; /* Ù„Ù„ÙŠÙ…ÙŠÙ† ÙÙŠ RTL */
    transform: translateY(
      calc(-50% + 14px)
    ); /* Ø¶Ø¨Ø· Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ© Ø¨Ø¯Ù‚Ø© */
    color: var(--icon-color);
    cursor: pointer;
  }

  /* Style for input fields with validation errors */
  .login_form-group input.login_input-error {
    border-color: var(--danger-color); /* Red border for error */
  }

  .login_form-group input.login_input-error:focus {
    box-shadow: 0 0 0 3px var(--danger-color-light); /* Red shadow on focus */
  }

  /* Style for the error message below the input */
  .login_error-message {
    color: var(--danger-color); /* Red color for error text */
    font-size: 12px;
    margin-top: 5px;
    min-height: 15px; /* Reserve space to prevent layout shifts */
  }

  .login_form-group input:focus {
    outline: none;
    border-color: var(--primary-color); /* ØªØ¹Ø¯ÙŠÙ„: Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ Ù…ØªÙ†Ø§Ø³Ù‚ */
    box-shadow: var(--shadow-focus);
  }

  /* 7. Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
  .login_btn {
    width: 100%;
    padding: 15px;
    font-size: clamp(16px, 4vw, 18px); /* Responsive font size */
    margin-top: 10px;
    border: none;
    color: white;
    background-color: var(--primary-color);
    box-shadow: 0 4px 15px var(--primary-color-light),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transition: transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
    border-radius: 10px; /* ÙŠÙØ¶Ù„ Ø¥Ø¶Ø§ÙØ© Ø­ÙˆØ§Ù Ø¯Ø§Ø¦Ø±ÙŠØ© Ù„ÙŠØªÙ†Ø§Ø³Ù‚ Ù…Ø¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ */
  }

  .login_btn:active {
    transform: translateY(2px);
    box-shadow: 0 2px 8px var(--primary-color-light);
  }

  /* 8. ØªØ°ÙŠÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ (Ø±ÙˆØ§Ø¨Ø· Ø¥Ø¶Ø§ÙÙŠØ©) */
  .login_form-footer {
    margin-top: 25px;
    font-size: 14px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: center;
  }

  /* Ø±Ø§Ø¨Ø· "Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†": ÙŠØ¸Ù‡Ø± ÙƒØ¥Ø¬Ø±Ø§Ø¡ Ø«Ø§Ù†ÙˆÙŠ Ø£Ø³Ø§Ø³ÙŠ */
  .login_form-footer-link {
    color: var(--primary-color); /* Ù„ÙˆÙ† Ø£Ø²Ø±Ù‚ ÙˆØ§Ø¶Ø­ */
    font-size: 14px; /* ØªØ¹Ø¯ÙŠÙ„: ØªÙˆØ­ÙŠØ¯ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
    text-decoration: none;
  }

  /* Ø±Ø§Ø¨Ø· "Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ": ÙŠØ¸Ù‡Ø± ÙƒØ®ÙŠØ§Ø± Ø¨Ø¯ÙŠÙ„ ÙˆØ£Ù‚Ù„ Ø£Ù‡Ù…ÙŠØ© */
  .login_guest-link {
    color: var(--text-color-light); /* Ù„ÙˆÙ† Ø±Ù…Ø§Ø¯ÙŠ Ù„Ø¬Ø¹Ù„Ù‡ Ø£Ù‚Ù„ Ø¨Ø±ÙˆØ²Ù‹Ø§ */
    font-size: 14px;
    border-top: 1px solid var(--border-color); /* Ø®Ø· ÙØ§ØµÙ„ Ø£ØºÙ…Ù‚ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
    padding-top: 15px; /* Ù…Ø³Ø§ÙØ© ÙÙˆÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· */
    width: 100%; /* Ø¬Ø¹Ù„Ù‡ ÙŠÙ…ØªØ¯ Ø¹Ù„Ù‰ Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
    text-align: center; /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù†Øµ */
    text-decoration: none;
  }

  /* Ø£ÙŠÙ‚ÙˆÙ†Ø© ØªØ¨Ø¯ÙŠÙ„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± */
  .login_toggle-password {
    position: absolute;
    top: 50%;
    left: 15px; /* Ù„Ù„ÙŠØ³Ø§Ø± ÙÙŠ RTL */
    transform: translateY(
      calc(-50% + 14px)
    ); /* Ø¶Ø¨Ø· Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠØ© Ø¨Ø¯Ù‚Ø© */
    color: var(--icon-color);
    cursor: pointer;
  }

  /* ØªØ¹Ø¯ÙŠÙ„ Ø­Ù‚Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± */
  #login_password {
    padding-left: 45px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¹ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± */
  }

  .login_form-footer a strong {
    font-weight: 700;
  }

  /* === Back to Home Button (in Header) - ØªÙ… Ø§Ù„Ø¥Ø¨Ù‚Ø§Ø¡ Ø¹Ù„ÙŠÙ‡ ÙƒÙ…Ø§ Ù‡Ùˆ ÙƒÙˆÙ†Ù‡ Ø¹Ù†ØµØ± Ù‡ÙŠØ¯Ø± ÙˆÙ„ÙŠØ³ Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ === */
  .back-to-home-btn {
    display: flex;
    flex-direction: column; /* Ø¬Ø¹Ù„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„Ù†Øµ Ø¨ØªØ±ØªÙŠØ¨ Ø¹Ù…ÙˆØ¯ÙŠ */
    align-items: center;
    gap: 2px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„Ù†Øµ */
    font-family: "Tajawal", sans-serif;
    font-weight: 600;
    color: var(--dark-blue); /* âœ… ØªØ¹Ø¯ÙŠÙ„: ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø²Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ù‚ */
    text-decoration: none;
    padding: 8px 12px;
    border-radius: 20px;
    transition: background-color 0.3s, color 0.3s;
  }

  .back-to-home-btn i {
    font-size: 16px;
    margin-bottom: 2px; /* Ø¥Ø¶Ø§ÙØ© Ù…Ø³Ø§ÙØ© ØµØºÙŠØ±Ø© Ø£Ø³ÙÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
  }

  .back-to-home-btn span {
    font-size: 12px; /* ØªØµØºÙŠØ± Ø­Ø¬Ù… Ø®Ø· Ø§Ù„Ù†Øµ */
    white-space: nowrap; /* Ù…Ù†Ø¹ Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„Ø§Ù†Ù‚Ø³Ø§Ù… Ø¥Ù„Ù‰ Ø³Ø·Ø±ÙŠÙ† */
  }

  /* Media query for very small screens */
  @media (max-width: 480px) {
    .login_container form {
      padding: 30px 25px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø´Ùˆ Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§ */
      /* Ø¬Ø¯ÙŠØ¯: Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¸Ù„ ÙˆØ§Ù„Ø­Ø¯ÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ù‹Ø§ */
      box-shadow: none;
      border: none;
      background-color: transparent;
      backdrop-filter: none;
      -webkit-backdrop-filter: none; /* For Safari compatibility */
    }
    .login_form-group {
      margin-bottom: 15px;
    }
  }
</style>

<div id="header-container1" style="height: 70px"></div>

<div
  id="login_form-wrapper"
  class="login_page-wrapper"
  style="display: none"
>
  <div id="login_form-container" class="login_container">
    <h2 id="login_title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <form id="login_form">
      <div id="login_phone-form-group" class="login_form-group">
        <label for="login_phone"
          ><i class="fas fa-phone"></i> Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label
        >
        <input type="tel" id="login_phone" name="login_phone" required />
        <div id="login_phone-error" class="login_error-message"></div>
      </div>
      <div id="login_password-form-group" class="login_form-group">
        <label for="login_password"
          ><i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label
        >
        <input
          type="password"
          id="login_password"
          name="login_password"
          required
        />
        <i
          class="fas fa-eye login_toggle-password"
          id="login_togglePassword"
        ></i>
        <div id="login_password-error" class="login_error-message"></div>
      </div>
      <button type="submit" class="button login_btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <div id="login_form-footer" class="login_form-footer">
        <a
          href="register.html"
          id="login_go-to-register-link"
          class="login_form-footer-link"
          >Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <strong>Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</strong></a
        >
        <a id="login_guest-btn" class="login_guest-link"
          >Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ <strong>Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ</strong> Ù„ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a
        >
      </div>
    </form>
  </div>
</div>
<script>
  /**
 * @description Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.
 * ØªØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ¹Ø±Ø¶ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø³Ø¬Ù„Ø§Ù‹ Ø¯Ø®ÙˆÙ„Ù‡.
 * ØªÙ‚ÙˆÙ… Ø¨Ø±Ø¨Ø· Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¯Ø®ÙˆÙ„.
 * @async
 * @function loadPage
 * @param {object} [params] - Ø¨ÙŠØ§Ù†Ø§Øª (Ø­Ø§Ù„Ø©) ÙŠÙ…ÙƒÙ† ØªÙ…Ø±ÙŠØ±Ù‡Ø§ Ù…Ù† Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©.
 * @returns {Promise<void>} - ÙˆØ¹Ø¯ (Promise) Ù„Ø§ ÙŠÙØ±Ø¬Ø¹ Ù‚ÙŠÙ…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„.
 */
async function loadPage(params) {
  try {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ù‡ Ø¨Ø§Ù„ÙØ¹Ù„
    if (Number(userSession?.is_seller) >= 1) {
      // Ù…Ø­Ø§ÙˆÙ„Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„Ø§Ù‹ Ø¯Ø®ÙˆÙ„Ù‡.
      if (typeof initializeNotifications === "function") {
        initializeNotifications();
      }
      // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ†ÙÙŠØ° Ù„Ø¥ØªØ§Ø­Ø© Ø§Ù„ÙØ±ØµØ© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ (Ø§Ù„Ù…ÙØ±ÙˆØ¶ Ø£Ù† ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±)
      return;
    }

    // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„.
    const loginFormWrapper = document.getElementById("login_form-wrapper");
    if (loginFormWrapper) {
      // Ø§Ø³ØªØ®Ø¯Ø§Ù… 'flex' Ù„Ø£Ù†Ù‡ ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ CSS
      loginFormWrapper.style.display = "flex";
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    login_setupLoginForm();
    
  } catch (error) {
    console.error("ğŸš« Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯Ø§Ù„Ø© loadPage:", error);
    // ÙŠÙ…ÙƒÙ† Ø¹Ø±Ø¶ Ø®Ø·Ø£ Ø¹Ø§Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… SweetAlert2
    if (typeof Swal !== "undefined") {
        Swal.fire({
            icon: "error",
            title: "Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©",
            text: "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹.",
        });
    }
  }
}

/**
 * @description ØªÙ‚ÙˆÙ… Ø¨Ø¥Ø¹Ø¯Ø§Ø¯ ÙƒØ§ÙØ© Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.
 * ØªØ´Ù…Ù„: ØªØ¨Ø¯ÙŠÙ„ Ø±Ø¤ÙŠØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŒ ØªÙ†Ù‚ÙŠØ© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙØŒ ÙˆÙ…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.
 * @function login_setupLoginForm
 * @returns {void}
 */
function login_setupLoginForm() {
    try {
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        const loginForm = document.getElementById("login_form");
        if (!loginForm) return;

        const loginPhoneInput = document.getElementById("login_phone");
        const loginPasswordInput = document.getElementById("login_password");
        const loginTogglePassword = document.getElementById("login_togglePassword");
        const loginGuestBtn = document.getElementById("login_guest-btn");

        // 1. Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ© ØªØ¨Ø¯ÙŠÙ„ Ø±Ø¤ÙŠØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        if (loginTogglePassword && loginPasswordInput) {
            loginTogglePassword.addEventListener("click", function () {
                // ØªØ¨Ø¯ÙŠÙ„ Ù†ÙˆØ¹ Ø§Ù„Ø­Ù‚Ù„
                const type =
                    loginPasswordInput.getAttribute("type") === "password" ? "text" : "password";
                loginPasswordInput.setAttribute("type", type);
                // ØªØ¨Ø¯ÙŠÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø¹ÙŠÙ†
                this.classList.toggle("fa-eye");
                this.classList.toggle("fa-eye-slash");
            });
        }

        // 2. Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ù„Ù„ØªÙ†Ù‚ÙŠØ©)
        if (loginPhoneInput) {
            loginPhoneInput.addEventListener("input", function (e) {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯Ø§Ù„Ø© `normalizeDigits` Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‡Ù†Ø¯ÙŠØ© (Ù…Ø«Ù„ 'Ù Ù¡Ù¢') Ø¥Ù„Ù‰ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ('012').
                const normalized = normalizeDigits(e.target.value);
                // Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªØ¹Ø¨ÙŠØ± Ù†Ù…Ø·ÙŠ Ù„Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø­Ø±Ù Ù„ÙŠØ³ Ø±Ù‚Ù…Ù‹Ø§ (0-9).
                e.target.value = normalized.replace(/[^0-9]/g, "");
            });
        }
        
        // 3. Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ø¥Ø±Ø³Ø§Ù„ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        loginForm.addEventListener("submit", login_handleSubmit);

        // 4. Ø±Ø¨Ø· Ø§Ù„Ø­Ø¯Ø« Ø¨Ø²Ø± "Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ".
        if (loginGuestBtn) {
            loginGuestBtn.addEventListener("click", login_handleGuestLogin);
        }

    } catch (error) {
        console.error("ğŸš« Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯Ø§Ù„Ø© login_setupLoginForm:", error);
    }
}


/**
 * @description Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ø¥Ø±Ø³Ø§Ù„ Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.
 * ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§ØªØŒ Ø«Ù… ÙŠØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„.
 * @event submit
 * @async
 * @param {Event} e - ÙƒØ§Ø¦Ù† Ø§Ù„Ø­Ø¯Ø« Ù„Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ.
 * @returns {Promise<void>}
 */
async function login_handleSubmit(e) {
  try {
    console.log(
      "%c[Login Page] ØªÙ… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.",
      "color: blue; font-weight: bold;"
    );
    // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ (Ø§Ù„Ø°ÙŠ ÙŠÙ‚ÙˆÙ… Ø¨Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©).
    e.preventDefault();

    const loginPhoneInput = document.getElementById("login_phone");
    const loginPasswordInput = document.getElementById("login_password");

    // 1. Ù…Ø³Ø­ Ø£ÙŠ Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ Ø³Ø§Ø¨Ù‚Ø©
    if (typeof clearError === "function") {
        clearError(loginPhoneInput);
        clearError(loginPasswordInput);
    }
    
    // 2. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
    const phoneValue = loginPhoneInput.value.trim();
    const passwordValue = loginPasswordInput.value.trim();
    let loginIsValid = true;

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
    if (phoneValue === "") {
      showError(loginPhoneInput, "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨.");
      loginIsValid = false;
    } else if (phoneValue.length < 11) {
      showError(loginPhoneInput, "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† 11 Ø±Ù‚Ù…Ù‹Ø§.");
      loginIsValid = false;
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    if (passwordValue === "") {
      showError(loginPasswordInput, "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨Ø©.");
      loginIsValid = false;
    } else if (passwordValue.length < 4) {
      showError(loginPasswordInput, "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† 4 Ø£Ø­Ø±Ù.");
      loginIsValid = false;
    }

    // 3. Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª ØµØ§Ù„Ø­Ø©
    if (loginIsValid) {
      console.log("[Login Page] Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØµØ§Ù„Ø­ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„...");
      
      // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© ØªÙÙŠØ¯ Ø¨Ø£Ù† Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¬Ø§Ø±ÙŠØ©.
      Swal.fire({
        title: "Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...",
        text: "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹.",
        allowOutsideClick: false,
        didOpen: () => {
          // Ø¥Ø¸Ù‡Ø§Ø± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„.
          Swal.showLoading();
        },
        customClass: { popup: 'fullscreen-swal' }, // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ø®ØµØµ
      });

      // 4. Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ØªØ­Ù‚Ù‚
      const verificationResult = await verifyUserPassword(
        phoneValue,
        passwordValue
      );

      // 5. Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†ØªÙŠØ¬Ø© Ø§Ù„ØªØ­Ù‚Ù‚
      if (verificationResult && !verificationResult.error) {
        console.log(
          "[Login Page] ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­. Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ handleLoginSuccess..."
        );
        login_handleLoginSuccess(verificationResult);
      } else {
        // Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚
        console.error(
          "[Login Page] ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:",
          verificationResult?.error || "Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø­Ø¯Ø¯"
        );
        Swal.close();
        const errorMessage =
          "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± Ù…ØªÙˆØ§ÙÙ‚ÙŠÙ†. ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­ØªÙ‡Ù…";
        if (typeof showError === "function") {
            showError(loginPasswordInput, errorMessage);
        }
      }
    }
  } catch (error) {
    console.error("ğŸš« Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯Ø§Ù„Ø© login_handleSubmit:", error);
    // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
    if (typeof Swal !== "undefined") {
        Swal.close();
        Swal.fire({
            icon: "error",
            title: "ÙØ´Ù„ ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯Ø®ÙˆÙ„",
            text: "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.",
        });
    }
  }
}

/**
 * @description ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø« Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù†Ø§Ø¬Ø­ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù….
 * @function login_handleLoginSuccess
 * @param {object} user - ÙƒØ§Ø¦Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ù‡.
 * @async
 * @returns {Promise<void>}
 */
async function login_handleLoginSuccess(user) {
  try {
    console.log(
      "%c[Login Page] Ø¯Ø®Ù„Ù†Ø§ Ø¯Ø§Ù„Ø© login_handleLoginSuccess. Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",
      "color: green;",
      user
    );

    // 1. Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø©
    localStorage.setItem("loggedInUser", JSON.stringify(user));
    userSession = user; // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØ§Ø¦Ù† Ø§Ù„Ø¹Ø§Ù… Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  setUserNameInIndexBar(); 
    // 2. Ø¥Ø¹Ø¯Ø§Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª FCM Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¤Ù‡Ù„Ø§Ù‹
    if (Number(userSession?.is_seller) >= 1) {
      console.log("[Login Page] Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¤Ù‡Ù„ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ setupFCM() Ø§Ù„Ø¢Ù†...");
      if (typeof setupFCM === "function") {
        await setupFCM();
        await login_askForNotificationPermission();
      }
    } else {
      console.log(
        "[Login Page] Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø¤Ù‡Ù„ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§ØªØŒ ØªÙ… ØªØ®Ø·ÙŠ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ setupFCM()."
      );
    }

    // 3. Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    Swal.fire({
      title: `ğŸ‰ Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ${userSession.username}! ğŸ‰`,
      html: `
        <p style="font-size: 1.1rem; color: #333;">Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø¬Ø§Ù‡Ø² Ù„ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ ÙØ±ÙŠØ¯Ø©!</p>
        <div style="text-align: right; margin-top: 20px; padding-right: 15px; font-size: 1rem;">
          <p style="margin-bottom: 10px;">ğŸ›ï¸ ØªØµÙØ­ Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø³Ù‡ÙˆÙ„Ø©.</p>
          <p style="margin-bottom: 10px;">ğŸ’° ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­ØµØ±ÙŠØ©.</p>
          <p>âœ¨ Ø§ÙƒØªØ´Ù ÙƒÙ„ Ù…Ø§ Ù‡Ùˆ Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø³ÙˆÙŠØ³ Ø¨Ø§Ø²Ø§Ø±.</p>
        </div>
      `,
      icon: "success",
      allowOutsideClick: false, // Ù…Ù†Ø¹ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
      confirmButtonText: "Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†!",
      confirmButtonColor: "#3b82f6",
      customClass: { popup: 'fullscreen-swal' }, // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ø®ØµØµ
    }).then((result) => {
      // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±ØŒ Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
      if (result.isConfirmed) {
        if (typeof mainLoader === "function") {
            mainLoader("./pages/home.html", "index-home-container", 0, undefined, "hiddenHomeIcon");
        }
      }
    });

  } catch (error) {
    console.error("ğŸš« Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯Ø§Ù„Ø© login_handleLoginSuccess:", error);
  }
}

/**
 * @description ØªØ·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ØµÙ„ÙŠ (Native) Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ù…Ù„ Ø¶Ù…Ù† Ø¨ÙŠØ¦Ø© Android.
 * @function login_askForNotificationPermission
 * @async
 * @returns {Promise<void>} - ÙŠÙØ±Ø¬Ø¹ ÙˆØ¹Ø¯Ù‹Ø§ (Promise) Ù„Ø§ ÙŠÙØ±Ø¬Ø¹ Ù‚ÙŠÙ…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„.
 */
async function login_askForNotificationPermission() {
  try {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„ÙƒØ§Ø¦Ù† 'Android' Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ÙƒÙˆØ¯ ÙŠØ¹Ù…Ù„ Ø¯Ø§Ø®Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯
    if (
      window.Android &&
      typeof window.Android.requestNotificationPermission === "function"
    ) {
      console.log(
        "Calling native function to request notification permission..."
      );
      window.Android.requestNotificationPermission();
    } else {
      console.log("ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ ØºÙŠØ± Ù…ØªØ§Ø­Ø©.");
    }
  } catch (error) {
    console.error("ğŸš« Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯Ø§Ù„Ø© login_askForNotificationPermission:", error);
  }
}

/**
 * @description ÙŠØ¹Ø§Ù„Ø¬ Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ.
 * @function login_handleGuestLogin
 * @param {Event} event - ÙƒØ§Ø¦Ù† Ø§Ù„Ø­Ø¯Ø« Ù„Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø±Ø§Ø¨Ø·.
 * @returns {void}
 */
function login_handleGuestLogin(event) {
  try {
    event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
    console.log("[Auth] Logging in as a guest.");

    // Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ù…Ø³ØªØ®Ø¯Ù… Ø¶ÙŠÙ
    const guestUser = {
      username: "Ø¶ÙŠÙ",
      is_guest: true,
      user_key: "guest_user",
      is_seller: -1,
      notifications_key: null, // Ø§Ù„Ø¶ÙŠÙ Ù„ÙŠØ³ Ù„Ù‡ Ù…ÙØªØ§Ø­ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
      notifications_enabled: false, // Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø¹Ø·Ù„Ø© Ù„Ù„Ø¶ÙŠÙ
    };

    // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¶ÙŠÙ ÙÙŠ localStorage ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø©
    localStorage.setItem("loggedInUser", JSON.stringify(guestUser));
    userSession = guestUser;
  setUserNameInIndexBar(); 
    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    if (typeof mainLoader === "function") {
        mainLoader(
          "./pages/home.html",
          "index-home-container",
          0,
          undefined,
          "hiddenHomeIcon"
        );
    }
  } catch (error) {
    console.error("ğŸš« Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¯Ø§Ù„Ø© login_handleGuestLogin:", error);
  }
}

loadPage();

// ÙŠØªÙ… Ø¥Ø¯Ø±Ø§Ø¬ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ± Ø¨Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…ØªØ¨Ø¹Ø© ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (hgh_sec)
insertUniqueSnapshot("../pages/header.html", "header-container1", 300);
</script>